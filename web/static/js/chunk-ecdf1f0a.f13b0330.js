(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ecdf1f0a"],{1779:function(t,a,s){t.exports=s.p+"static/img/mo_woman.2f55a35c.png"},"2fdb":function(t,a,s){"use strict";var e=s("5ca1"),r=s("d2c8"),i="includes";e(e.P+e.F*s("5147")(i),"String",{includes:function(t){return!!~r(this,t,i).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"33d7":function(t,a,s){},"48e3":function(t,a,s){t.exports=s.p+"static/img/mo_man.2a3be7d6.png"},5147:function(t,a,s){var e=s("2b4c")("match");t.exports=function(t){var a=/./;try{"/./"[t](a)}catch(s){try{return a[e]=!1,!"/./"[t](a)}catch(r){}}return!0}},"590c":function(t,a,s){"use strict";s("33d7")},6762:function(t,a,s){"use strict";var e=s("5ca1"),r=s("c366")(!0);e(e.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s("9c6c")("includes")},"7a25":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"add_teacher_wrap"},[e("div",{staticClass:"com_title"},[e("div",{staticClass:"c_titles"},[t._m(0),e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[t._v("基础设置")]),e("el-breadcrumb-item",{attrs:{to:{path:"/library/teacher"}}},[t._v("教师管理")]),e("el-breadcrumb-item",[t._v("教师信息详情")])],1)],1)]),e("div",{staticClass:"person_main"},[e("div",{staticClass:"person_box"},[e("div",{staticClass:"s_logo"},[e("div",{staticClass:"school_logo"},[e("div",{staticClass:"s_logo_bg"},[""!=t.formMsg.headIcon&&"data:image;base64,"!=t.formMsg.headIcon?e("img",{attrs:{src:t.formMsg.headIcon,alt:""}}):e("img",{attrs:{src:1==t.formMsg.gender?s("48e3"):s("1779"),alt:""}})])]),e("el-upload",{ref:"imgTeacherUpload",staticClass:"upload-demo",attrs:{action:"","auto-upload":!1,limit:1,"show-file-list":!1,"on-change":t.imgBroadcastChange,accept:"image/jpg,image/png,image/jpeg"}},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.clearFiles}},[t._v("更换头像")])],1)],1),e("el-form",{staticClass:"person_contain",attrs:{"label-position":"right","label-width":"1.4rem",model:t.formMsg}},[e("div",{staticClass:"person_msg"},[e("img",{attrs:{src:s("7c3b"),alt:""}}),t._v("\n          基础信息\n        ")]),e("el-form-item",{attrs:{required:"",label:"登录账号："}},[e("el-input",{attrs:{placeholder:"请输入登录账号",disabled:"administrator"==t.formMsg.passport},model:{value:t.formMsg.passport,callback:function(a){t.$set(t.formMsg,"passport",a)},expression:"formMsg.passport"}}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.passportFlag,expression:"passportFlag"}],staticClass:"tip_left"},[e("div",{staticClass:"tip_msg"},[e("img",{attrs:{src:s("32e5"),alt:""}}),t._v("\n              请输入登录账号且不少于6位\n            ")])])],1),e("el-form-item",{attrs:{required:"",label:"教师姓名："}},[e("el-input",{attrs:{placeholder:"请输入教师姓名"},model:{value:t.formMsg.name,callback:function(a){t.$set(t.formMsg,"name",a)},expression:"formMsg.name"}}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.nameFlag,expression:"nameFlag"}],staticClass:"tip_left"},[e("div",{staticClass:"tip_msg"},[e("img",{attrs:{src:s("32e5"),alt:""}}),t._v("\n              请输入教师姓名\n            ")])])],1),e("el-form-item",{attrs:{label:"登录密码："}},[e("el-input",{attrs:{type:"password",placeholder:"默认为:登录账号后6位"},model:{value:t.formMsg.password,callback:function(a){t.$set(t.formMsg,"password",a)},expression:"formMsg.password"}}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.passwordFlag,expression:"passwordFlag"}],staticClass:"tip_left"},[e("div",{staticClass:"tip_msg"},[e("img",{attrs:{src:s("32e5"),alt:""}}),t._v("\n              登录密码至少6位\n            ")])])],1),e("el-form-item",{attrs:{required:"",label:"教师性别："}},[e("el-radio-group",{model:{value:t.formMsg.gender,callback:function(a){t.$set(t.formMsg,"gender",a)},expression:"formMsg.gender"}},[e("el-radio",{attrs:{label:1}},[t._v("男")]),e("el-radio",{attrs:{label:0}},[t._v("女")])],1)],1),e("el-form-item",{attrs:{label:"手机号码："}},[e("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.formMsg.phone,callback:function(a){t.$set(t.formMsg,"phone",a)},expression:"formMsg.phone"}}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.phoneFlag,expression:"phoneFlag"}],staticClass:"tip_left"},[e("div",{staticClass:"tip_msg"},[e("img",{attrs:{src:s("32e5"),alt:""}}),t._v("\n              手机号格式有误\n            ")])])],1),e("el-form-item",{attrs:{label:"邮箱地址："}},[e("el-input",{attrs:{placeholder:"请输入邮箱地址"},model:{value:t.formMsg.email,callback:function(a){t.$set(t.formMsg,"email",a)},expression:"formMsg.email"}}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.emailFlag,expression:"emailFlag"}],staticClass:"tip_left"},[e("div",{staticClass:"tip_msg"},[e("img",{attrs:{src:s("32e5"),alt:""}}),t._v("\n              邮箱格式有误\n            ")])])],1),e("div",{staticClass:"person_msg"},[e("img",{attrs:{src:s("7c3b"),alt:""}}),t._v("\n          辅助信息\n        ")]),e("el-form-item",{attrs:{label:"籍贯：",prop:"birthPlace"}},[e("section",{staticClass:"address-select-list"},[e("el-select",{staticClass:"adress-select",attrs:{placeholder:"请选择省"},model:{value:t.formMsg.birthPlace,callback:function(a){t.$set(t.formMsg,"birthPlace",a)},expression:"formMsg.birthPlace"}},t._l(t.provinceData,(function(t){return e("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}})]),e("el-form-item",{attrs:{label:"备注："}},[e("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容",maxlength:"200","show-word-limit":""},model:{value:t.formMsg.remark,callback:function(a){t.$set(t.formMsg,"remark",a)},expression:"formMsg.remark"}}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}})],1),t.power1?e("el-form-item",{staticClass:"sub_center"},[e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),e("el-button",{staticClass:"resets",attrs:{type:"primary"},on:{click:t.goBack}},[t._v("取消")])],1):t._e()],1)],1)])])},r=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"com_cir"},[e("img",{attrs:{src:s("becf"),alt:""}})])}],i=(s("28a5"),s("7f7f"),s("6762"),s("2fdb"),s("e86e")),o=s("99b1"),l={name:"person",data:function(){return{power1:!1,diaLogForm:{file:"",imgBase64:""},upUrl:"https://jsonplaceholder.typicode.com/posts/",upData:{},photo:"https://static.waijiaoyi.com/wjy2017/aidaka/c307b2d0af151492b10a2604a1573ba1?x-oss-process=image/resize,m_fill,w_300,h_300",nameFlag:!1,passwordFlag:!1,numberFlag:!1,sexFlag:!1,phoneFlag:!1,emailFlag:!1,passportFlag:!1,oldPassFlag:!1,oldRight:!1,newPassFlag:!1,newRight1:!1,newRight2:!1,newRight3:!1,twoPassFlag:!1,formMsg:{passport:"",oldPassport:"",name:"",password:"",gender:"",phone:"",email:"",birthPlace:"",headIcon:"",remark:""},provinceData:"",cityData:"",areaData:"",typeData:["公私","私立"],name:"",remark:""}},created:function(){},mounted:function(){this.passport=this.$route.params.userID,this.powerData(),this.getUserInfo(),this.initAddressFrom(o)},methods:{powerData:function(){var t=JSON.parse(localStorage.getItem("userAuth")).menuAuthID;console.log(t),this.power1=t.includes(40203)},clearFiles:function(){this.$refs["imgTeacherUpload"].clearFiles()},imgBroadcastChange:function(t,a){if(console.log(t),console.log(a),t.size>512e3)return this.$message.error("上传的头像太大，建议500KB以下"),this.clearFiles(),!1;this.diaLogForm.file=t,this.uploadImgToBase64(t.raw),console.log(this.diaLogForm)},uploadImgToBase64:function(t){var a=this,s=new FileReader;s.readAsDataURL(t),s.onload=function(){a.diaLogForm.imgBase64=this.result,a.formMsg.headIcon=this.result}},initAddressFrom:function(t){console.log(t),this.provinceData=t},chooseProvince:function(t){var a=this;console.log(t),this.selectCityDisabled="香港特别行政区"==t,this.cityData=[],this.areaData=[],this.formMsg.city="",this.formMsg.district="",console.log(this.provinceData),this.provinceData.map((function(s){if(t==s.name)return a.cityData=s.city,!1}))},chooseCity:function(t){var a=this;console.log(t),console.log(this.cityData),this.formMsg.district="",this.cityData.map((function(s){if(t==s.name)return a.areaData=s.area,console.log(a.areaData),!1}))},getUserInfo:function(){var t=this;t.$http.get(i["a"]+"/aimw/user/getUserProfile",{params:{passport:t.passport}}).then((function(a){console.log(a);var s=a.data;0==s.code&&(t.formMsg={passport:s.data.passport,oldPassport:s.data.passport,name:s.data.name,password:s.data.password,gender:s.data.gender,phone:s.data.phone,email:s.data.email,birthPlace:s.data.birthPlace,headIcon:"data:image;base64,"+s.data.headIcon,remark:s.data.remark})})).catch((function(t){console.log(t)}))},userChange:function(t){""!=t&&(this.passportFlag=!1),console.log(t)},phoneChange:function(t){""!=t&&(this.phoneFlag=!1),console.log(t)},emailChange:function(t){""!=t&&(this.emailFlag=!1),console.log(t)},onSubmit:function(){var t=this,a=this;this.passportFlag=this.nameFlag=this.passwordFlag=this.phoneFlag=this.emailFlag=!1;var s=/^1[3456789]\d{9}$/,e=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(""==this.formMsg.passport||this.formMsg.passport.length<6)return this.passportFlag=!0,!1;if(""==this.formMsg.name)return this.nameFlag=!0,!1;if(""!=this.formMsg.password&&this.formMsg.password.length<6)return this.passwordFlag=!0,!1;if(""!=this.formMsg.phone&&!s.test(this.formMsg.phone))return this.phoneFlag=!0,!1;if(""!=this.formMsg.email&&!e.test(this.formMsg.email))return this.emailFlag=!0,!1;""==this.formMsg.password&&(this.formMsg.password=this.formMsg.passport.substring(this.formMsg.passport.length-6));var r={newPassport:this.formMsg.passport,passport:this.formMsg.oldPassport,name:this.formMsg.name,password:this.formMsg.password,gender:this.formMsg.gender,phone:this.formMsg.phone,email:this.formMsg.email,birthPlace:this.formMsg.birthPlace,headIcon:this.formMsg.headIcon.split("base64,")[1],remark:this.formMsg.remark};console.log(r),a.$http.put(i["a"]+"/aimw/teacher/updateUserInfo",r).then((function(a){var s=a.data;0==s.code?(console.log(s),t.$router.push({path:"/library/teacher"})):t.$message.error(s.msg)})).catch((function(t){console.log(t)}))},goBack:function(){this.$router.push({path:"/library/teacher"})}}},n=l,c=(s("590c"),s("2877")),m=Object(c["a"])(n,e,r,!1,null,null,null);a["default"]=m.exports},d2c8:function(t,a,s){var e=s("aae3"),r=s("be13");t.exports=function(t,a,s){if(e(a))throw TypeError("String#"+s+" doesn't accept regex!");return String(r(t))}}}]);