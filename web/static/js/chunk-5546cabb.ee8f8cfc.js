(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5546cabb"],{1779:function(t,s,a){t.exports=a.p+"static/img/mo_woman.2f55a35c.png"},"48e3":function(t,s,a){t.exports=a.p+"static/img/mo_man.2a3be7d6.png"},"9e2c":function(t,s,a){},bb99:function(t,s,a){"use strict";a("9e2c")},bdba:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"add_teacher_wrap"},[e("div",{staticClass:"com_title"},[e("div",{staticClass:"c_titles"},[t._m(0),e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[t._v("基础设置")]),e("el-breadcrumb-item",{attrs:{to:{path:"/library/teacher"}}},[t._v("教师管理")]),e("el-breadcrumb-item",[t._v("新增教师")])],1)],1)]),e("div",{staticClass:"person_main"},[e("div",{staticClass:"person_box"},[e("div",{staticClass:"s_logo"},[e("div",{staticClass:"school_logo"},[e("div",{staticClass:"s_logo_bg"},[t.formMsg.headIcon?e("img",{attrs:{src:t.formMsg.headIcon,alt:""}}):e("img",{attrs:{src:1==t.formMsg.gender?a("48e3"):a("1779"),alt:""}})])]),e("el-upload",{ref:"imgTeacherUpload",staticClass:"upload-demo",attrs:{action:"","auto-upload":!1,limit:1,"show-file-list":!1,"on-change":t.imgBroadcastChange,accept:"image/jpg,image/png,image/jpeg"}},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.clearFiles}},[t._v("更换头像")])],1)],1),e("el-form",{staticClass:"person_contain",attrs:{"label-position":"right","label-width":"1.4rem",model:t.formMsg}},[e("div",{staticClass:"person_msg"},[e("img",{attrs:{src:a("7c3b"),alt:""}}),t._v("\n          基础信息\n        ")]),e("el-form-item",{attrs:{required:"",label:"登录账号："}},[e("el-input",{attrs:{placeholder:"请输入登录账号"},model:{value:t.formMsg.passport,callback:function(s){t.$set(t.formMsg,"passport",s)},expression:"formMsg.passport"}}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.passportFlag,expression:"passportFlag"}],staticClass:"tip_left"},[e("div",{staticClass:"tip_msg"},[e("img",{attrs:{src:a("32e5"),alt:""}}),t._v("\n              请输入登录账号且不少于6位\n            ")])])],1),e("el-form-item",{attrs:{required:"",label:"教师姓名："}},[e("el-input",{attrs:{placeholder:"请输入教师姓名"},model:{value:t.formMsg.name,callback:function(s){t.$set(t.formMsg,"name",s)},expression:"formMsg.name"}}),e("el-input",{staticClass:"dis_none"}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.nameFlag,expression:"nameFlag"}],staticClass:"tip_left"},[e("div",{staticClass:"tip_msg"},[e("img",{attrs:{src:a("32e5"),alt:""}}),t._v("\n              请输入教师姓名\n            ")])])],1),e("el-form-item",{attrs:{label:"登录密码："}},[e("el-input",{staticClass:"dis_none",attrs:{type:"password"}}),e("el-input",{attrs:{type:"password",placeholder:"默认为:登录账号后6位"},model:{value:t.formMsg.password,callback:function(s){t.$set(t.formMsg,"password",s)},expression:"formMsg.password"}}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.passwordFlag,expression:"passwordFlag"}],staticClass:"tip_left"},[e("div",{staticClass:"tip_msg"},[e("img",{attrs:{src:a("32e5"),alt:""}}),t._v("\n              登录密码至少6位\n            ")])])],1),e("el-form-item",{attrs:{required:"",label:"教师性别："}},[e("el-radio-group",{model:{value:t.formMsg.gender,callback:function(s){t.$set(t.formMsg,"gender",s)},expression:"formMsg.gender"}},[e("el-radio",{attrs:{label:1}},[t._v("男")]),e("el-radio",{attrs:{label:0}},[t._v("女")])],1)],1),e("el-form-item",{attrs:{label:"手机号码："}},[e("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.formMsg.phone,callback:function(s){t.$set(t.formMsg,"phone",s)},expression:"formMsg.phone"}}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.phoneFlag,expression:"phoneFlag"}],staticClass:"tip_left"},[e("div",{staticClass:"tip_msg"},[e("img",{attrs:{src:a("32e5"),alt:""}}),t._v("\n              手机号格式有误\n            ")])])],1),e("el-form-item",{attrs:{label:"邮箱地址："}},[e("el-input",{attrs:{placeholder:"请输入邮箱地址"},model:{value:t.formMsg.email,callback:function(s){t.$set(t.formMsg,"email",s)},expression:"formMsg.email"}}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.emailFlag,expression:"emailFlag"}],staticClass:"tip_left"},[e("div",{staticClass:"tip_msg"},[e("img",{attrs:{src:a("32e5"),alt:""}}),t._v("\n              邮箱格式有误\n            ")])])],1),e("div",{staticClass:"person_msg"},[e("img",{attrs:{src:a("7c3b"),alt:""}}),t._v("\n          辅助信息\n        ")]),e("el-form-item",{attrs:{label:"籍贯：",prop:"birthPlace"}},[e("section",{staticClass:"address-select-list"},[e("el-select",{staticClass:"adress-select",attrs:{placeholder:"请选择省"},model:{value:t.formMsg.birthPlace,callback:function(s){t.$set(t.formMsg,"birthPlace",s)},expression:"formMsg.birthPlace"}},t._l(t.provinceData,(function(t){return e("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})})),1)],1),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}})]),e("el-form-item",{attrs:{label:"备注："}},[e("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入内容",maxlength:"200","show-word-limit":""},model:{value:t.formMsg.remark,callback:function(s){t.$set(t.formMsg,"remark",s)},expression:"formMsg.remark"}}),e("div",{staticStyle:{width:"4rem",height:"0.36rem"}})],1),e("el-form-item",{staticClass:"sub_center"},[e("el-button",{attrs:{type:"primary"},on:{click:t.addSubmit}},[t._v("保存")]),e("el-button",{staticClass:"resets",attrs:{type:"primary"},on:{click:t.goBack}},[t._v("取消")])],1)],1)],1)])])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"com_cir"},[e("img",{attrs:{src:a("becf"),alt:""}})])}],r=(a("28a5"),a("7f7f"),a("e86e")),o=a("99b1"),l={name:"person",data:function(){return{diaLogForm:{file:"",imgBase64:""},upUrl:"https://jsonplaceholder.typicode.com/posts/",upData:{},photo:"https://static.waijiaoyi.com/wjy2017/aidaka/c307b2d0af151492b10a2604a1573ba1?x-oss-process=image/resize,m_fill,w_300,h_300",nameFlag:!1,passwordFlag:!1,numberFlag:!1,sexFlag:!1,phoneFlag:!1,emailFlag:!1,passportFlag:!1,oldPassFlag:!1,oldRight:!1,newPassFlag:!1,newRight1:!1,newRight2:!1,newRight3:!1,twoPassFlag:!1,formMsg:{passport:"",name:"",password:"",gender:1,phone:"",email:"",birthPlace:"",headIcon:"",remark:""},provinceData:"",cityData:"",areaData:"",name:"",remark:""}},created:function(){},mounted:function(){var t=this;setTimeout((function(){t.formMsg.passport="",t.formMsg.name="",t.formMsg.password=""}),0),this.initAddressFrom(o)},methods:{clearFiles:function(){this.$refs["imgTeacherUpload"].clearFiles()},imgBroadcastChange:function(t,s){if(t.size>512e3)return this.$message.error("上传的头像太大，建议500KB以下"),this.clearFiles(),!1;this.diaLogForm.file=t,this.uploadImgToBase64(t.raw)},uploadImgToBase64:function(t){var s=this,a=new FileReader;a.readAsDataURL(t),a.onload=function(){s.diaLogForm.imgBase64=this.result,s.formMsg.headIcon=this.result}},initAddressFrom:function(t){this.provinceData=t},chooseProvince:function(t){var s=this;this.selectCityDisabled="香港特别行政区"==t,this.cityData=[],this.areaData=[],this.formMsg.city="",this.formMsg.district="",this.provinceData.map((function(a){if(t==a.name)return s.cityData=a.city,!1}))},chooseCity:function(t){var s=this;this.formMsg.district="",this.cityData.map((function(a){if(t==a.name)return s.areaData=a.area,!1}))},getUserInfo:function(){var t=this;t.$http.get(r["a"]+"/AIMW/user/getUserProfile").then((function(s){var a=s.data;0==a.code&&(t.formMsg.passport=a.data.passport,t.formMsg.phone=a.data.phone,t.formMsg.email=a.data.email,t.name=a.data.name,t.remark=a.data.remark,localStorage.setItem("userInfo",JSON.stringify(a.data)),sessionStorage.setItem("userName",a.data.name),t.setUserName(a.data.name))})).catch((function(t){console.log(t)}))},userChange:function(t){""!=t&&(this.passportFlag=!1)},phoneChange:function(t){""!=t&&(this.phoneFlag=!1)},emailChange:function(t){""!=t&&(this.emailFlag=!1)},addSubmit:function(){var t=this,s=this;this.passportFlag=this.nameFlag=this.passwordFlag=this.phoneFlag=this.emailFlag=!1;var a=/^1[3456789]\d{9}$/,e=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;return""==this.formMsg.passport||this.formMsg.passport.length<6?(this.passportFlag=!0,!1):""==this.formMsg.name?(this.nameFlag=!0,!1):""!=this.formMsg.password&&this.formMsg.password.length<6?(this.passwordFlag=!0,!1):""==this.formMsg.phone||a.test(this.formMsg.phone)?""==this.formMsg.email||e.test(this.formMsg.email)?(""==this.formMsg.password&&(this.formMsg.password=this.formMsg.passport.substring(this.formMsg.passport.length-6)),this.formMsg.headIcon=this.formMsg.headIcon.split("base64,")[1],console.log(this.formMsg),void s.$http.post(r["a"]+"/aimw/teacher/addUser",this.formMsg).then((function(s){var a=s.data;0==a.code?t.$router.push({path:"/library/teacher"}):t.$message.error(a.msg)})).catch((function(t){console.log(t)}))):(this.emailFlag=!0,!1):(this.phoneFlag=!0,!1)},goBack:function(){this.$router.push({path:"/library/teacher"})}}},n=l,m=(a("bb99"),a("2877")),c=Object(m["a"])(n,e,i,!1,null,null,null);s["default"]=c.exports}}]);